В соответствии с объектной моделью документа («Document Object Model», коротко DOM), каждый HTML-тег является объектом. Вложенные теги являются «детьми» родительского элемента. Текст, который находится внутри тега, также является объектом.

Все эти объекты доступны при помощи JavaScript, мы можем использовать их для изменения страницы.

Например, `document.body` – объект для тега `<body>`.

```jsx
document.body.style.background = 'red'; // сделать фон красным

setTimeout(() => document.body.style.background = '', 3000); // вернуть назад
```

## Пример DOM

```html
<!DOCTYPE HTML>
<html>
<head>
  <title>О лосях</title>
</head>
<body>
  Правда о лосях.
</body>
</html>
```

![[Pasted image 20240908180421.png]]

## Комментарии

Комментарии попадают в DOM дерево!!!

## Навигация по элементам DOM

Все операции с DOM начинаются с объекта `document`. Это главная «точка входа» в DOM. Из него мы можем получить доступ к любому узлу.

Так выглядят основные ссылки, по которым можно переходить между узлами DOM:

![[Pasted image 20240908180520.png]]

## Сверху: documentElement и body

Самые верхние элементы дерева доступны как свойства объекта `document`:

**`<html>` = `document.documentElement`**

Самый верхний узел документа: `document.documentElement`. В DOM он соответствует тегу `<html>`.

**`<body>` = `document.body`**

Другой часто используемый DOM-узел – узел тега `<body>`: `document.body`.

**`<head>` = `document.head`**

Тег `<head>` доступен как `document.head`.

## Дети: childNodes, firstChild, lastChild

Здесь и далее мы будем использовать два принципиально разных термина:

- **Дочерние узлы (или дети)** – элементы, которые являются непосредственными детьми узла. Другими словами, элементы, которые лежат непосредственно внутри данного. Например, `<head>` и `<body>` являются детьми элемента `<html>`.
- **Потомки** – все элементы, которые лежат внутри данного, включая детей, их детей и т.д.

Пример ниже последовательно выведет детей `document.body`:

```html
<html>
<body>
  <div>Начало</div>

  <ul>
    <li>Информация</li>
  </ul>

  <div>Конец</div>

  <script>
    for (let i = 0; i < document.body.childNodes.length; i++) {
      alert( document.body.childNodes[i] ); // Text, DIV, Text, UL, ..., SCRIPT
    }
  </script>
  ...какой-то HTML-код...
</body>
</html>
```

Если запустить пример выше, то последним будет выведен элемент `<script>`. **На самом деле, в документе есть ещё «какой-то HTML-код», но на момент выполнения скрипта браузер ещё до него не дошёл, поэтому скрипт не видит его.**

Для проверки наличия дочерних узлов существует также специальная функция `elem.hasChildNodes()`.

### DOM-коллекции

Как мы уже видели, `childNodes` похож на массив. На самом деле это не массив, а _коллекция_ – особый перебираемый объект-псевдомассив.

Перебор коллекции через for … of

```jsx
for (let node of document.body.childNodes) {
  alert(node); // покажет все узлы из коллекции
}
```

## Не нужно использовать for in

Цикл `for..in` перебирает все перечисляемые свойства. А у коллекций есть некоторые «лишние», редко используемые свойства, которые обычно нам не нужны:

## Соседи и родитель

_Соседи_ – это узлы, у которых один и тот же родитель.

Например, здесь `<head>` и `<body>` соседи:

```html
<html>
  <head>...</head><body>...</body>
</html>
```

- говорят, что `<body>` – «следующий» или «правый» сосед `<head>`
- также можно сказать, что `<head>` «предыдущий» или «левый» сосед `<body>`.

Следующий узел того же родителя (следующий сосед) – в свойстве `nextSibling`, а предыдущий – в `previousSibling`.

Родитель доступен через `parentNode`.

## Навигация только по элементам

Навигационные свойства, описанные выше, относятся ко _всем_ узлам в документе. В частности, в `childNodes` находятся и текстовые узлы и узлы-элементы и узлы-комментарии, если они есть.

Но для большинства задач текстовые узлы и узлы-комментарии нам не нужны.

Поэтому давайте рассмотрим дополнительный набор ссылок, которые учитывают только _узлы-элементы_:

Эти ссылки похожи на те, что раньше, только в ряде мест стоит слово `Element`:

- `children` – коллекция детей, которые являются элементами.
- `firstElementChild`, `lastElementChild` – первый и последний дочерний элемент.
- `previousElementSibling`, `nextElementSibling` – соседи-элементы.
- `parentElement` – родитель-элемент.